<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מטבח לולו - המטבח הסיני הטוב בירושלים</title>
    <meta name="description" content="הזמינו מהמטבח הסיני הטוב ביותר בירושלים - מנות טריות, משלוחים מהירים ומחירים הוגנים">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico">
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://docs.google.com">
    <link rel="preconnect" href="https://lulu-k.com">
    
    <!-- Additional meta tags -->
    <meta name="theme-color" content="#DC143C">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="מטבח לולו">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;500;600;700&family=Heebo:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header id="header">
        <div class="container">
            <div class="logo">
                <h1>🍜 מטבח לולו</h1>
                <span>המטבח הסיני הטוב בירושלים</span>
            </div>
            
            <!-- Language Toggle -->
            <div class="language-toggle">
                <button id="lang-he" class="lang-btn active" onclick="switchLanguage('he')" title="עברית">עב</button>
                <button id="lang-en" class="lang-btn" onclick="switchLanguage('en')" title="English">EN</button>
            </div>
            
            <nav class="nav">
                <ul>
                    <li><a href="#daily-special" data-translate="nav.dailySpecial">מנת היום</a></li>
                    <li><a href="#menu" data-translate="nav.menu">התפריט</a></li>
                    <li><a href="#vip" data-translate="nav.vip">VIP</a></li>
                    <li><a href="#contact" data-translate="nav.contact">צור קשר</a></li>
                    <li><a href="#payment" data-translate="nav.payment">תשלום</a></li>
                    <li class="cart-icon" onclick="openCart()">
                        🛒 <span id="cart-count">0</span>
                        <span class="cart-label" data-translate="nav.cart">עגלה</span>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h2 data-translate="hero.title">המטבח הסיני המקורי של ירושלים</h2>
            <p data-translate="hero.subtitle">מנות טריות, טעמים מקוריים, משלוח מהיר!</p>
            
            <!-- Customer Counter -->
            <div class="hero-stats">
                <div class="stat-item">
                    <span class="stat-number" id="happy-customers">2,847</span>
                    <span class="stat-label">לקוחות מרוצים</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="orders-completed">12,394</span>
                    <span class="stat-label">הזמנות שבוצעו</span>
                </div>
            </div>
            
            <div class="hero-buttons">
                <button class="btn-primary" onclick="scrollToMenu()" data-translate="hero.orderNow">הזמן עכשיו</button>
                <button class="btn-secondary" onclick="openVIP()" data-translate="hero.joinVip">הצטרף ל-VIP</button>
            </div>
        </div>
    </section>

    <!-- Daily Special -->
    <section id="daily-special" class="daily-special">
        <div class="container">
            <h2>🔥 מנת היום המיוחדת</h2>
            <div id="special-dish" class="special-card">
                <div class="special-image">
                    <img src="" alt="מנת היום" id="special-img">
                </div>
                <div class="special-info">
                    <h3 id="special-name"></h3>
                    <p id="special-description"></p>
                    <div class="special-price">
                        <span class="original-price" id="special-original"></span>
                        <span class="special-price-final" id="special-final"></span>
                    </div>
                    <button class="btn-primary" onclick="addToCart('special')">הוסף לעגלה</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Filters -->
    <section class="filters">
        <div class="container">
            <h3>סנן לפי:</h3>
            <div class="filter-buttons">
                <button class="filter-btn" data-filter="all">הכל</button>
                <button class="filter-btn" data-filter="starter">מנות פתיחה</button>
                <button class="filter-btn" data-filter="main">מנות עיקריות</button>
                <button class="filter-btn" data-filter="vegetarian">צמחוני</button>
                <button class="filter-btn" data-filter="spicy">חריף</button>
                <button class="filter-btn" data-filter="family">משפחתי XL</button>
            </div>
            <div class="allergen-filters">
                <h4>🚫 הסתר אלרגנים:</h4>
                <label><input type="checkbox" id="hide-gluten"> גלוטן</label>
                <label><input type="checkbox" id="hide-nuts"> אגוזים</label>
                <label><input type="checkbox" id="hide-dairy"> חלבי</label>
                <label><input type="checkbox" id="hide-soy"> סויה</label>
            </div>
        </div>
    </section>

    <!-- Menu -->
    <section id="menu" class="menu">
        <div class="container">
            <h2 data-translate="menu.fullMenu">התפריט המלא</h2>
            
            <!-- Search Bar -->
            <div class="menu-search">
                <input type="text" id="menu-search-input" data-translate-placeholder="menu.search" 
                       placeholder="חפש מנה..." onkeyup="searchMenu(this.value)">
                <button onclick="clearSearch()" id="clear-search">✕</button>
            </div>
            
            <!-- Filter Buttons -->
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all" data-translate="menu.all">הכל</button>
                <button class="filter-btn" data-filter="vegan" data-translate="menu.vegan">🌱 טבעוני</button>
                <button class="filter-btn" data-filter="vegetarian" data-translate="menu.vegetarian">🥗 צמחוני</button>
                <button class="filter-btn" data-filter="spicy" data-translate="menu.spicy">🌶️ חריף</button>
                <button class="filter-btn" data-filter="kosher" data-translate="menu.kosher">✡️ כשר</button>
                <button class="filter-btn" data-filter="gluten-free" data-translate="menu.glutenFree">🚫🌾 ללא גלוטן</button>
            </div>
            
            <!-- Loading indicator -->
            <div id="menu-loading" class="loading-indicator" style="display: none;">
                <div class="loader"></div>
                <p data-translate="notify.loading">טוען תפריט...</p>
            </div>
            
            <!-- Menu Grid -->
            <div class="menu-grid" id="menu-grid">
                <!-- Menu items will be loaded dynamically from Google Sheets -->
            </div>
            
            <!-- No results message -->
            <div id="no-results" class="no-results" style="display: none;">
                <p>לא נמצאו מנות התואמות לחיפוש</p>
            </div>
        </div>
    </section>

    <!-- Comparison -->
    <section class="comparison" id="comparison-section" style="display:none;">
        <div class="container">
            <h2>השוואת מנות (עד 3)</h2>
            <div class="comparison-grid" id="comparison-grid">
                <!-- Comparison items will be loaded here -->
            </div>
            <button class="btn-secondary" onclick="clearComparison()">נקה השוואה</button>
        </div>
    </section>

    <!-- VIP Membership -->
    <section id="vip" class="vip-section">
        <div class="container">
            <h2>👑 מנוי VIP</h2>
            <div class="vip-card">
                <h3>הצטרף למנוי ה-VIP</h3>
                <div class="vip-price">₪299/חודש</div>
                <ul>
                    <li>✅ 15% הנחה על כל הזמנה</li>
                    <li>✅ משלוח חינם תמיד</li>
                    <li>✅ גישה למנות בלעדיות</li>
                    <li>✅ עדיפות בהזמנות</li>
                    <li>✅ נקודות לויאליטי כפולות</li>
                </ul>
                <button class="btn-vip" onclick="joinVIP()">הצטרף ל-VIP</button>
            </div>
        </div>
    </section>

    <!-- Loyalty Points -->
    <section class="loyalty">
        <div class="container">
            <h2>⭐ נקודות לויאליטי</h2>
            <div class="loyalty-info">
                <p>כל ₪1 = נקודה אחת</p>
                <p>100 נקודות = ₪10 הנחה</p>
                <div class="points-display">
                    <span>הנקודות שלך: </span>
                    <span id="user-points">0</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="contact">
        <div class="container">
            <h2>צור קשר</h2>
            <div class="contact-info">
                <div class="contact-item">
                    <h3>שעות פתיחה</h3>
                    <p>ראשון-חמישי: 13:00-21:00</p>
                    <p>שישי: 13:00-15:00</p>
                    <p>שבת: סגור</p>
                </div>
                <div class="contact-item">
                    <h3>משלוחים</h3>
                    <p>ירושלים: ₪40</p>
                    <p>זמן משלוח: 45-60 דקות</p>
                </div>
                <div class="contact-item">
                    <h3>טלפון</h3>
                    <p>02-1234567</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Payment Options -->
    <section id="payment" class="payment-section">
        <div class="container">
            <h2>💳 אפשרויות תשלום</h2>
            <div class="payment-options">
                <div class="payment-item">
                    <span class="payment-icon">💰</span>
                    <h3>מזומן</h3>
                    <p>תשלום במזומן בעת המשלוח</p>
                </div>
                <div class="payment-item">
                    <span class="payment-icon">📱</span>
                    <h3>Bit</h3>
                    <p><a href="https://www.bitpay.co.il/app/me/C822FDFE-1C69-4F92-B57B-09635D465B9D" target="_blank">לחץ לתשלום דרך Bit</a></p>
                </div>
                <div class="payment-item">
                    <span class="payment-icon">💳</span>
                    <h3>PayBox</h3>
                    <p><a href="https://link.payboxapp.com/Hh5KZaqQc1Jz93Zv7" target="_blank">לחץ לתשלום דרך PayBox</a></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Cart Modal -->
    <div id="cart-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-translate="cart.title">העגלה שלך</h2>
                <span class="close" onclick="closeCart()">&times;</span>
            </div>
            
            <div id="cart-items" class="cart-items-container">
                <!-- Cart items will be populated here -->
            </div>
            
            <!-- Delivery Progress Bar -->
            <div class="delivery-progress" id="delivery-progress">
                <!-- Progress will be updated dynamically -->
            </div>
            
            <!-- Upsell Suggestions -->
            <div class="upsell-section" id="upsell-suggestions" style="display: none;">
                <!-- Upsell items will be populated here -->
            </div>
            
            <!-- Cart Summary -->
            <div class="cart-summary">
                <div class="summary-row">
                    <span data-translate="cart.subtotal">סכום ביניים:</span>
                    <span id="cart-subtotal">₪0</span>
                </div>
                <div class="summary-row vip-discount" id="vip-discount-row" style="display: none;">
                    <span>הנחת VIP (15%):</span>
                    <span id="vip-discount-amount">-₪0</span>
                </div>
                <div class="summary-row">
                    <span data-translate="cart.delivery">משלוח:</span>
                    <span id="delivery-fee">₪40</span>
                </div>
                <div class="summary-row total-row">
                    <span data-translate="cart.total">סה״כ:</span>
                    <span id="cart-total">₪0</span>
                </div>
            </div>
            
            <div class="delivery-options">
                <h3>אפשרויות משלוח:</h3>
                <label class="delivery-option">
                    <input type="radio" name="delivery" value="pickup"> 
                    <span data-translate="cart.pickupFree">איסוף עצמי (חינם)</span>
                </label>
                <label class="delivery-option">
                    <input type="radio" name="delivery" value="delivery" checked> 
                    <span data-translate="cart.deliveryPaid">משלוח (₪40)</span>
                </label>
            </div>
            
            <button class="btn-primary full-width" onclick="proceedToCheckout()" data-translate="cart.checkout">
                המשך לתשלום
            </button>
        </div>
    </div>

    <!-- Quick Preview Modal -->
    <div id="preview-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="closePreview()">&times;</span>
            <div id="preview-content"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 מטבח לולו - כל הזכויות שמורות</p>
            <p>נבנה עם ❤️ בירושלים</p>
        </div>
    </footer>

    <!-- Core JavaScript Modules -->
    <script src="src/services/TranslationService.js"></script>
    <script src="src/services/MenuService.js"></script>
    <script src="src/services/CartManager.js"></script>
    <script src="src/components/ExtrasModal.js"></script>
    <script src="script.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>